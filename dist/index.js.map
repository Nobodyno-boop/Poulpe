{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"index.js","sourceRoot":"../src","sourcesContent":["interface PoulpeOption {\n    element: HTMLElement | string,\n    data: Object\n}\n\n\nclass Poulpe {\n  private regex: RegExp = /(?:{{([^}]+)}})/g;\n  private element: any;\n  private data: any;\n  private events:any = {};\n\n  constructor(option: PoulpeOption) {\n    this.element = option.element;\n    this.data = option.data;\n  }\n\n  public run(): void {\n    let matches = this.find();\n    this.bind(matches);\n    this.emit(\"end\", this.element)\n  }\n\n  private find(): any {\n    let text = this.getText();\n    if (this.regex.test(text)) {\n      let newmatch:any = text.match(this.regex)!.map((x: String )=> {\n        let un = x\n          .replace(\"{{\", \"\")\n          .replace(\"}}\", \"\").trim();\n        let d = this.data[un];\n        let obj = { data: d, object: x };\n        this.emit(\"search\", obj);\n\n        return d === null ? null : obj;\n      });\n\n      this.emit(\"find\", newmatch.filter((x:any) => x !== null));\n      return newmatch;\n    }\n  }\n\n  private bind(matches:[]) {\n    if (matches instanceof Array) {\n      matches.forEach(x => {\n        if (x === null) return;\n        if(typeof this.element === \"object\"){\n            this.element[\"innerText\"] = this.element[\"innerText\"].replace(x[\"object\"], x[\"data\"]);\n        } else {\n            this.element = this.element.replace(x[\"object\"], x[\"data\"]);\n        }\n\n        this.emit(\"bind\", x);\n      });\n\n    } else\n      throw new Error(\n        \"[Poulpe] Can't render, see if your text/document is good\"\n      );\n  }\n\n  private getText() : string {\n    return typeof this.element === \"object\"\n      ? this.element[\"innerText\"]\n      : this.element;\n  }\n\n  \tpublic on(event:any, listener:any) {\n\t\tif (this.events[event] === undefined) {\n\t\t\tthis.events[event] = [];\n\t\t}\n\n\t\tthis.events[event].push(listener);\n        var l = this;\n\t\treturn function() {\n\t\t\tl.off(event, listener);\n\t\t};\n\t}\n\n\tpublic off(event?:any, listener?:any) {\n\t\tif (event === undefined && listener === undefined) {\n\t\t\tthis.events = {};\n\t\t} else if (listener === undefined) {\n\t\t\tdelete this.events[event];\n\t\t} else if (this.events[event].indexOf(listener) !== -1) {\n\t\t\tthis.events[event].splice(this.events[event].indexOf(listener), 1);\n\t\t}\n\t}\n\n\tpublic emit(event:any, ...args:any) {\n\t\tif (this.events[event] !== undefined) {\n\t\t\tfor (const listener of this.events[event]) {\n\t\t\t\tlistener(...args);\n\t\t\t}\n\t\t}\n\n\t\tif (event !== \"*\") {\n\t\t\tthis.emit(\"*\", ...args);\n\t\t}\n\t}\n\n\tpublic once(event:any, listener:any) {\n\t\treturn this.on(event, () => {\n\t\t\tthis.emit(event);\n\n\t\t\tthis.off(event, listener);\n\t\t});\n\t}\n}\n\nif(typeof window === \"object\"){\n    (window as any)[\"Poulpe\"] = Poulpe;\n} else {\n    module.exports =  Poulpe\n}\n"]}